<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="CLASS" height="714px" preserveAspectRatio="none" style="width:605px;height:714px;background:#FFFFFF;" version="1.1" viewBox="0 0 605 714" width="605px" zoomAndPan="magnify"><defs/><g><!--class Command--><g class="entity" data-entity="Command" data-source-line="3" data-uid="ent0002" id="entity_Command"><rect fill="#F1F1F1" height="80.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="129.6328" x="248.25" y="213.48"/><ellipse cx="274.805" cy="229.48" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M270.7269,225.2456 L270.7269,223.0894 L278.1175,223.0894 L278.1175,225.2456 L275.6487,225.2456 L275.6487,233.3238 L278.1175,233.3238 L278.1175,235.48 L270.7269,235.48 L270.7269,233.3238 L273.1956,233.3238 L273.1956,225.2456 L270.7269,225.2456 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="71.9551" x="291.3728" y="234.3267">Command</text><line style="stroke:#181818;stroke-width:0.5;" x1="249.25" x2="376.8828" y1="245.48" y2="245.48"/><line style="stroke:#181818;stroke-width:0.5;" x1="249.25" x2="376.8828" y1="253.48" y2="253.48"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117.6328" x="254.25" y="270.4751">+execute(): void</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96.6465" x="254.25" y="286.772">+undo(): void</text></g><!--class AddItemCommand--><g class="entity" data-entity="AddItemCommand" data-source-line="8" data-uid="ent0003" id="entity_AddItemCommand"><rect fill="#F1F1F1" height="129.4844" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="168.1396" x="7" y="355.07"/><ellipse cx="24.2342" cy="371.07" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M27.2029,376.7106 Q26.6248,377.0075 25.9842,377.1481 Q25.3436,377.3044 24.6404,377.3044 Q22.1404,377.3044 20.8123,375.6638 Q19.4998,374.0075 19.4998,370.8825 Q19.4998,367.7575 20.8123,366.1013 Q22.1404,364.445 24.6404,364.445 Q25.3436,364.445 25.9842,364.6013 Q26.6404,364.7575 27.2029,365.0544 L27.2029,367.7731 Q26.5779,367.195 25.9842,366.9294 Q25.3904,366.6481 24.7654,366.6481 Q23.4217,366.6481 22.7342,367.7263 Q22.0467,368.7888 22.0467,370.8825 Q22.0467,372.9763 22.7342,374.0544 Q23.4217,375.1169 24.7654,375.1169 Q25.3904,375.1169 25.9842,374.8513 Q26.5779,374.57 27.2029,373.9919 L27.2029,376.7106 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="131.1748" x="38.7307" y="375.9167">AddItemCommand</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="174.1396" y1="387.07" y2="387.07"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="156.1396" x="13" y="404.0651">-service: OrderService</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99.4561" x="13" y="420.362">-recipe: String</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55.1318" x="13" y="436.6589">-qty: int</text><line style="stroke:#181818;stroke-width:1;" x1="8" x2="174.1396" y1="443.9606" y2="443.9606"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117.6328" x="13" y="460.9557">+execute(): void</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96.6465" x="13" y="477.2526">+undo(): void</text></g><!--class PayOrderCommand--><g class="entity" data-entity="PayOrderCommand" data-source-line="17" data-uid="ent0004" id="entity_PayOrderCommand"><rect fill="#F1F1F1" height="113.1875" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="206.5166" x="209.81" y="363.22"/><ellipse cx="241.5606" cy="379.22" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M244.5294,384.8606 Q243.9513,385.1575 243.3106,385.2981 Q242.67,385.4544 241.9669,385.4544 Q239.4669,385.4544 238.1388,383.8138 Q236.8263,382.1575 236.8263,379.0325 Q236.8263,375.9075 238.1388,374.2513 Q239.4669,372.595 241.9669,372.595 Q242.67,372.595 243.3106,372.7513 Q243.9669,372.9075 244.5294,373.2044 L244.5294,375.9231 Q243.9044,375.345 243.3106,375.0794 Q242.7169,374.7981 242.0919,374.7981 Q240.7481,374.7981 240.0606,375.8763 Q239.3731,376.9388 239.3731,379.0325 Q239.3731,381.1263 240.0606,382.2044 Q240.7481,383.2669 242.0919,383.2669 Q242.7169,383.2669 243.3106,383.0013 Q243.9044,382.72 244.5294,382.1419 L244.5294,384.8606 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="137.293" x="259.283" y="384.0667">PayOrderCommand</text><line style="stroke:#181818;stroke-width:0.5;" x1="210.81" x2="415.3266" y1="395.22" y2="395.22"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="156.1396" x="215.81" y="412.2151">-service: OrderService</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="194.5166" x="215.81" y="428.512">-strategy: PaymentStrategy</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108.3086" x="215.81" y="444.8089">-taxPercent: int</text><line style="stroke:#181818;stroke-width:1;" x1="210.81" x2="415.3266" y1="452.1106" y2="452.1106"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117.6328" x="215.81" y="469.1057">+execute(): void</text></g><!--class MacroCommand--><g class="entity" data-entity="MacroCommand" data-source-line="25" data-uid="ent0005" id="entity_MacroCommand"><rect fill="#F1F1F1" height="96.8906" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="146.6748" x="451.73" y="371.37"/><ellipse cx="466.7493" cy="387.37" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M469.7181,393.0106 Q469.14,393.3075 468.4993,393.4481 Q467.8587,393.6044 467.1556,393.6044 Q464.6556,393.6044 463.3275,391.9638 Q462.015,390.3075 462.015,387.1825 Q462.015,384.0575 463.3275,382.4013 Q464.6556,380.745 467.1556,380.745 Q467.8587,380.745 468.4993,380.9013 Q469.1556,381.0575 469.7181,381.3544 L469.7181,384.0731 Q469.0931,383.495 468.4993,383.2294 Q467.9056,382.9481 467.2806,382.9481 Q465.9368,382.9481 465.2493,384.0263 Q464.5618,385.0888 464.5618,387.1825 Q464.5618,389.2763 465.2493,390.3544 Q465.9368,391.4169 467.2806,391.4169 Q467.9056,391.4169 468.4993,391.1513 Q469.0931,390.87 469.7181,390.2919 L469.7181,393.0106 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114.6318" x="480.7536" y="392.2167">MacroCommand</text><line style="stroke:#181818;stroke-width:0.5;" x1="452.73" x2="597.4048" y1="403.37" y2="403.37"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="134.6748" x="457.73" y="420.3651">-steps: Command[]</text><line style="stroke:#181818;stroke-width:1;" x1="452.73" x2="597.4048" y1="427.6669" y2="427.6669"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117.6328" x="457.73" y="444.662">+execute(): void</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96.6465" x="457.73" y="460.9589">+undo(): void</text></g><!--class OrderService--><g class="entity" data-entity="OrderService" data-source-line="32" data-uid="ent0006" id="entity_OrderService"><rect fill="#F1F1F1" height="145.7813" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="242.3301" x="79.9" y="561.56"/><ellipse cx="150.9288" cy="577.56" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M153.8976,583.2006 Q153.3194,583.4975 152.6788,583.6381 Q152.0382,583.7944 151.3351,583.7944 Q148.8351,583.7944 147.5069,582.1538 Q146.1944,580.4975 146.1944,577.3725 Q146.1944,574.2475 147.5069,572.5913 Q148.8351,570.935 151.3351,570.935 Q152.0382,570.935 152.6788,571.0913 Q153.3351,571.2475 153.8976,571.5444 L153.8976,574.2631 Q153.2726,573.685 152.6788,573.4194 Q152.0851,573.1381 151.4601,573.1381 Q150.1163,573.1381 149.4288,574.2163 Q148.7413,575.2788 148.7413,577.3725 Q148.7413,579.4663 149.4288,580.5444 Q150.1163,581.6069 151.4601,581.6069 Q152.0851,581.6069 152.6788,581.3413 Q153.2726,581.06 153.8976,580.4819 L153.8976,583.2006 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91.7725" x="171.4288" y="582.4067">OrderService</text><line style="stroke:#181818;stroke-width:0.5;" x1="80.9" x2="321.2301" y1="593.56" y2="593.56"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="169.6543" x="85.9" y="610.5551">-factory: ProductFactory</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91.8271" x="85.9" y="626.852">-order: Order</text><line style="stroke:#181818;stroke-width:1;" x1="80.9" x2="321.2301" y1="634.1538" y2="634.1538"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="194.6875" x="85.9" y="651.1489">+addItem(recipe, qty): void</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="175.9502" x="85.9" y="667.4457">+removeLastItem(): void</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="230.3301" x="85.9" y="683.7426">+pay(strategy, taxPercent): void</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="221.6895" x="85.9" y="700.0395">+totalWithTax(percent): Money</text></g><!--class PosRemote--><g class="entity" data-entity="PosRemote" data-source-line="42" data-uid="ent0007" id="entity_PosRemote"><rect fill="#F1F1F1" height="129.4844" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="215.5537" x="205.29" y="7"/><ellipse cx="269.3427" cy="23" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M272.3115,28.6406 Q271.7334,28.9375 271.0927,29.0781 Q270.4521,29.2344 269.749,29.2344 Q267.249,29.2344 265.9209,27.5938 Q264.6084,25.9375 264.6084,22.8125 Q264.6084,19.6875 265.9209,18.0313 Q267.249,16.375 269.749,16.375 Q270.4521,16.375 271.0927,16.5313 Q271.749,16.6875 272.3115,16.9844 L272.3115,19.7031 Q271.6865,19.125 271.0927,18.8594 Q270.499,18.5781 269.874,18.5781 Q268.5302,18.5781 267.8427,19.6563 Q267.1552,20.7188 267.1552,22.8125 Q267.1552,24.9063 267.8427,25.9844 Q268.5302,27.0469 269.874,27.0469 Q270.499,27.0469 271.0927,26.7813 Q271.6865,26.5 272.3115,25.9219 L272.3115,28.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78.9482" x="289.8427" y="27.8467">PosRemote</text><line style="stroke:#181818;stroke-width:0.5;" x1="206.29" x2="419.8437" y1="39" y2="39"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="129.6299" x="211.29" y="55.9951">-slots: Command[]</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="203.5537" x="211.29" y="72.292">-history: Deque&lt;Command&gt;</text><line style="stroke:#181818;stroke-width:1;" x1="206.29" x2="419.8437" y1="79.5938" y2="79.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="130.1631" x="211.29" y="96.5889">+setSlot(i, c): void</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103.1816" x="211.29" y="112.8857">+press(i): void</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96.6465" x="211.29" y="129.1826">+undo(): void</text></g><g class="entity" data-entity="GMN14" data-source-line="61" data-uid="ent0015" id="entity_GMN14"><path d="M357.33,614.32 L357.33,630.45 L322.59,634.45 L357.33,638.45 L357.33,654.5856 A0,0 0 0 0 357.33,654.5856 L490.8168,654.5856 A0,0 0 0 0 490.8168,654.5856 L490.8168,624.32 L480.8168,614.32 L357.33,614.32 A0,0 0 0 0 357.33,614.32" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M480.8168,614.32 L480.8168,624.32 L490.8168,624.32 L480.8168,614.32" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="56.8242" x="363.33" y="631.3869">Receiver</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112.4868" x="363.33" y="646.5197">Does actual work</text></g><g class="entity" data-entity="GMN17" data-source-line="66" data-uid="ent0018" id="entity_GMN17"><path d="M19.92,51.61 L19.92,91.8756 A0,0 0 0 0 19.92,91.8756 L170.2281,91.8756 A0,0 0 0 0 170.2281,91.8756 L170.2281,75.74 L204.98,71.74 L170.2281,67.74 L170.2281,61.61 L160.2281,51.61 L19.92,51.61 A0,0 0 0 0 19.92,51.61" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M160.2281,51.61 L160.2281,61.61 L170.2281,61.61 L160.2281,51.61" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="48.5913" x="25.92" y="68.6769">Invoker</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129.3081" x="25.92" y="83.8097">Triggers commands</text></g><!--reverse link Command to AddItemCommand--><g class="link" data-entity-1="Command" data-entity-2="AddItemCommand" data-source-line="51" data-uid="lnk8" id="link_Command_AddItemCommand"><path codeLine="51" d="M244.8523,305.1856 C219.7023,323.7656 203.63,335.65 175.49,356.43" fill="none" id="Command-backto-AddItemCommand" style="stroke:#181818;stroke-width:1;stroke-dasharray:7,7;"/><polygon fill="none" points="259.33,294.49,241.2871,300.3597,248.4175,310.0115,259.33,294.49" style="stroke:#181818;stroke-width:1;"/></g><!--reverse link Command to PayOrderCommand--><g class="link" data-entity-1="Command" data-entity-2="PayOrderCommand" data-source-line="52" data-uid="lnk9" id="link_Command_PayOrderCommand"><path codeLine="52" d="M313.07,312.49 C313.07,332.97 313.07,340.3 313.07,362.74" fill="none" id="Command-backto-PayOrderCommand" style="stroke:#181818;stroke-width:1;stroke-dasharray:7,7;"/><polygon fill="none" points="313.07,294.49,307.07,312.49,319.07,312.49,313.07,294.49" style="stroke:#181818;stroke-width:1;"/></g><!--reverse link Command to MacroCommand--><g class="link" data-entity-1="Command" data-entity-2="MacroCommand" data-source-line="53" data-uid="lnk10" id="link_Command_MacroCommand"><path codeLine="53" d="M378.6266,305.5045 C408.4066,328.5445 431.87,346.7 463.27,371" fill="none" id="Command-backto-MacroCommand" style="stroke:#181818;stroke-width:1;stroke-dasharray:7,7;"/><polygon fill="none" points="364.39,294.49,374.9551,310.25,382.2981,300.759,364.39,294.49" style="stroke:#181818;stroke-width:1;"/></g><!--link AddItemCommand to OrderService--><g class="link" data-entity-1="AddItemCommand" data-entity-2="OrderService" data-source-line="55" data-uid="lnk11" id="link_AddItemCommand_OrderService"><path codeLine="55" d="M124.22,484.9 C136.68,508.99 148.173,531.2009 160.993,555.9809" fill="none" id="AddItemCommand-to-OrderService" style="stroke:#181818;stroke-width:1;stroke-dasharray:7,7;"/><polygon fill="#181818" points="163.75,561.31,163.1672,551.4784,161.4525,556.8691,156.0618,555.1544,163.75,561.31" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="29.7832" x="147.07" y="527.6269">uses</text></g><!--link PayOrderCommand to OrderService--><g class="link" data-entity-1="PayOrderCommand" data-entity-2="OrderService" data-source-line="56" data-uid="lnk12" id="link_PayOrderCommand_OrderService"><path codeLine="56" d="M283.64,476.68 C270.03,502.52 256.4965,528.2316 241.9565,555.8316" fill="none" id="PayOrderCommand-to-OrderService" style="stroke:#181818;stroke-width:1;stroke-dasharray:7,7;"/><polygon fill="#181818" points="239.16,561.14,246.8938,555.0417,241.4904,556.7163,239.8159,551.313,239.16,561.14" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="29.7832" x="262.07" y="527.6269">uses</text></g><!--reverse link PosRemote to Command--><g class="link" data-entity-1="PosRemote" data-entity-2="Command" data-source-line="58" data-uid="lnk13" id="link_PosRemote_Command"><path codeLine="58" d="M313.07,148.97 C313.07,174.42 313.07,190.87 313.07,213.21" fill="none" id="PosRemote-backto-Command" style="stroke:#181818;stroke-width:1;"/><polygon fill="none" points="313.07,136.97,309.07,142.97,313.07,148.97,317.07,142.97,313.07,136.97" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="34.8296" x="314.07" y="179.5469">holds</text></g><!--SRC=[dLF1Rjim3BthAtZqi2JesIWA52iA16YneYxGGx639ZE945jqHTfBskxVAykEunZejkueFfAFV8_YhNMLzhe4KsZcIn5lVzQ2IqCkioy8PqfP9-XNsY1yexBKBeTN1V0LS8Scf2PVKcZ8vZ5Mkvo6m6-bObUupFEbO3akdmEZRwp15Bxx77tMlIBYqTWg05aOngrZw5dsAOH1siVya-ntUXyf_fMUnMl1TI0CbIKwoVf0H4Nlxj2R4FxBG0F_hJQU9kI25QS7FPz-_CzQuxdxji4a8TyExYclZLntxuXHczvlUwJJdJD99_cirNdCxB6a1cyqIymQGvNU9mUbPYDLnZb2eej7Avi7lKkg0RybX_kHFyJtWKSEMt11CXK7DfQxrQxmkSRp7hmuRi8eMIXCx0pCoPmUcHFx9pqFtfo_BHQJMpt59fTq2evjLcfoyel5nQbXATIChAQt-L6UEef4y_dm4LFOK947sBM8j-kD0Asc9tsF1cqJRRyYP0XNKUi2Vf7VAWnTskA-HO6hs66W2pLBrz0sLZy4XZLw1jFnyr3-3W00]--></g></svg>